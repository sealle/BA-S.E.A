{"version":3,"file":"static/webpack/static/development/pages/register.js.193d2ece350e4493ceed.hot-update.js","sources":["webpack:///./components/PersonRegister.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Router } from \"../routes\";\nimport { Form, Button, Icon, Popup, Message } from \"semantic-ui-react\";\nimport { Header } from \"semantic-ui-react\";\nimport Layout from \"./Layout\";\nimport HomeHeader from \"./HomeHeader\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport { setCookie } from \"../utils/CookieUtils\";\n\nclass PersonRegister extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMessage: \"\",\n      successMessage: \"\",\n      loading: false,\n      file1: \"\",\n      file2: \"\",\n      files: [],\n      prev1: \"\",\n      prev2: \"\",\n      showResults: false\n    };\n\n    this.handleSubmit = e => this._handleSubmit();\n  }\n\n  async _handleSubmit() {\n    this.setState({ loading: true });\n\n    const formData = new FormData();\n    formData.append(\"file1\", this.state.file1);\n    formData.append(\"file2\", this.state.file2);\n    formData.append(\"fname\", this.state.fname);\n    formData.append(\"lname\", this.state.lname);\n    formData.append(\"street\", this.state.street);\n    formData.append(\"houseNr\", this.state.houseNr);\n    formData.append(\"postCode\", this.state.postCode);\n    formData.append(\"placeOfRes\", this.state.placeOfRes);\n    formData.append(\"dateOfBirth\", this.state.dateOfBirth);\n    formData.append(\"nat\", this.state.nat);\n    formData.append(\"email\", this.state.email);\n    formData.append(\"mobNr\", this.state.mobNr);\n    formData.append(\"username\", this.state.username);\n    formData.append(\"password\", this.state.password);\n    formData.append(\"errorMessage\", this.state.errorMessage);\n\n    try {\n      const response = await axios.post(\n        window.location.origin + \"/register\",\n        formData\n      );\n      if (response.data.success) {\n        swal(\n          \"Success!\",\n          \"An email has been sent to you. Please confirm your email address and login to proceed\",\n          \"success\"\n        );\n        Router.push(\"/login\"); //TODO: add success popup\n      }\n    } catch (error) {\n      this.setState({ errorMessage: error.response.data.message });\n    }\n    this.setState({ loading: false });\n  }\n\n  handleFileChange = e => {\n    if (!e.target.files[0] || !e.target.files[1] || e.target.files[2]) {\n      this.setState({ errorMessage: \"You have to upload 2 images!\" });\n    } else {\n      this.setState({\n        file1: e.target.files[0],\n        file2: e.target.files[1],\n        prev1: URL.createObjectURL(e.target.files[0]),\n        prev2: URL.createObjectURL(e.target.files[1]),\n        showResults: true,\n        errorMessage: \"\"\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Layout>\n          <br />\n          <Form onSubmit={this.handleSubmit} error={this.state.errorMessage}>\n            <Form.Group widths=\"equal\">\n              <Form.Input\n                fluid\n                label=\"Username\"\n                placeholder=\"Username\"\n                required\n                name=\"username\"\n                value={this.state.username}\n                onChange={event =>\n                  this.setState({ username: event.target.value })\n                }\n              />\n              <Form.Input\n                fluid\n                type=\"password\"\n                label=\"Password\"\n                placeholder=\"Password\"\n                required\n                name=\"password\"\n                value={this.state.password}\n                pattern=\"^(?=.*?[A-Z])(?=(.*[a-z]){1,})(?=(.*[\\d]){1,})(?=(.*[\\W]){1,})(?!.*\\s).{8,}$\"\n                onChange={event =>\n                  this.setState({ password: event.target.value })\n                }\n              >\n                <Container style={{ display: \"inline-block\" }}>\n                  {\" \"}\n                  <Popup\n                    trigger={<Icon name=\"question circle outline\" />}\n                    content=\"The password must contain at least 1 upper case letter, 1 lower case letter, 1 digit, 1 special character and minimum eight in length!\"\n                    hideOnScroll\n                  />\n                </Container>\n              </Form.Input>\n            </Form.Group>\n            <Form.Group widths=\"equal\">\n              <Form.Input\n                fluid\n                label=\"First Name\"\n                placeholder=\"First Name\"\n                required\n                name=\"fname\"\n                value={this.state.fname}\n                onChange={event => this.setState({ fname: event.target.value })}\n              />\n              <Form.Input\n                fluid\n                label=\"Last Name\"\n                placeholder=\"Last Name\"\n                required\n                name=\"lname\"\n                value={this.state.lname}\n                onChange={event => this.setState({ lname: event.target.value })}\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Input\n                width=\"eleven\"\n                fluid\n                label=\"Street\"\n                placeholder=\"Street\"\n                required\n                name=\"street\"\n                value={this.state.street}\n                onChange={event =>\n                  this.setState({ street: event.target.value })\n                }\n              />\n              <Form.Input\n                width=\"five\"\n                fluid\n                label=\"House Number\"\n                required\n                placeholder=\"House Number\"\n                name=\"houseNr\"\n                value={this.state.houseNr}\n                onChange={event =>\n                  this.setState({ houseNr: event.target.value })\n                }\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Input\n                width=\"six\"\n                fluid\n                type=\"number\"\n                label=\"Postal Code\"\n                required\n                placeholder=\"Postal Code\"\n                name=\"postCode\"\n                value={this.state.postCode}\n                onChange={event =>\n                  this.setState({ postCode: event.target.value })\n                }\n              />\n              <Form.Input\n                width=\"ten\"\n                fluid\n                label=\"Place of Residenz\"\n                required\n                placeholder=\"Place of Residence\"\n                name=\"placeOfRes\"\n                value={this.state.placeOfRes}\n                onChange={event =>\n                  this.setState({ placeOfRes: event.target.value })\n                }\n              />\n            </Form.Group>\n            <Form.Group widths=\"equal\">\n              <Form.Input\n                fluid\n                label=\"Date of Birth\"\n                required\n                placeholder=\"DD.MM.YYYY\"\n                name=\"dateOfBirth\"\n                value={this.state.dateOfBirth}\n                onChange={event =>\n                  this.setState({ dateOfBirth: event.target.value })\n                }\n              />\n              <Form.Input\n                fluid\n                label=\"Nationality\"\n                required\n                placeholder=\"e.g. Switzerland\"\n                name=\"nat\"\n                value={this.state.nat}\n                onChange={event => this.setState({ nat: event.target.value })}\n              />\n            </Form.Group>\n            <Form.Group widths=\"equal\">\n              <Form.Input\n                fluid\n                label=\"Email\"\n                type=\"email\"\n                required\n                placeholder=\"email@email.com\"\n                name=\"email\"\n                value={this.state.email}\n                onChange={event => this.setState({ email: event.target.value })}\n              />\n              <Form.Input\n                fluid\n                label=\"Mobile Number\"\n                type=\"number\"\n                required\n                placeholder=\"+4* ** *** ** **\"\n                name=\"mobNr\"\n                value={this.state.mobNr}\n                onChange={event => this.setState({ mobNr: event.target.value })}\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Input\n                fluid\n                type=\"file\"\n                width=\"sixteen\"\n                required\n                label=\"ID front- and backside! (.png or .jpg)\"\n                name=\"file\"\n                id=\"file\"\n                multiple\n                onChange={this.handleFileChange}\n              />\n            </Form.Group>\n            {this.state.showResults ? (\n              <div className=\"image-preview\" style={{ marginBottom: \"10px\" }}>\n                <img\n                  src={this.state.prev1}\n                  style={{\n                    width: \"200px\",\n                    height: \"113px\",\n                    float: \"left\",\n                    marginBottom: \"12px\"\n                  }}\n                />\n                <img\n                  src={this.state.prev2}\n                  style={{\n                    width: \"200px\",\n                    height: \"113px\",\n                    float: \"right\",\n                    marginBottom: \"12px\"\n                  }}\n                />\n              </div>\n            ) : null}\n            {this.state.showResults ? (\n              <Button\n                icon\n                loading={this.state.loading}\n                fluid\n                size=\"large\"\n                color=\"blue\"\n              >\n                Submit\n                <Icon name=\"signup\" />\n              </Button>\n            ) : (\n              <Button icon disabled fluid size=\"large\" color=\"blue\">\n                Submit\n                <Icon name=\"signup\" />\n              </Button>\n            )}\n            <Message error header=\"Oops!\" content={this.state.errorMessage} />\n          </Form>\n          <br />\n          <br />\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default PersonRegister;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAyDA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AApEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;AAWA;AAAA;AAAA;AACA;AAfA;AAeA;AACA;;;;;;;;;;;;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AADA;AACA;AAGA;AACA;AAKA;AACA;AACA;;;;;;;AACA;AAAA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;AAiBA;AAAA;AACA;AAAA;AAIA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AATA;AAaA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AAHA;AAQA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAPA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AARA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AARA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AATA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AARA;AAaA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AAPA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAPA;AAUA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AARA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AARA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAaA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAUA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAaA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAGA;AAAA;AAAA;AAAA;AAOA;;;;AAjSA;AACA;AAmSA;;;;A","sourceRoot":""}