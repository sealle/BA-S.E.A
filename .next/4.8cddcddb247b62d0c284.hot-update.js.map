{"version":3,"file":"4.8cddcddb247b62d0c284.hot-update.js","sources":["webpack:///pages/login.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Router } from \"../routes\";\nimport { Form, Button, Message } from \"semantic-ui-react\";\nimport { Header } from \"semantic-ui-react\";\nimport Layout from \"../components/Layout\";\nimport axios from \"axios\";\nimport { setCookie } from \"../utils/CookieUtils\";\nimport HomeHeader from \"../components/HomeHeader\";\nimport jwtDecode from \"jwt-decode\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: \"\",\n      username: \"\",\n      errorMessage: \"\",\n      loading: false\n    };\n    this.login = e => this._login();\n  }\n\n  async _login() {\n    const formData = new FormData();\n    formData.append(\"username\", this.state.username);\n    formData.append(\"password\", this.state.password);\n    formData.append(\"errorMessage\", this.state.errorMessage);\n\n    this.setState({ loading: true });\n\n    try {\n      const res = await axios.post(\n        window.location.origin + \"/authenticate\",\n        formData\n      );\n      if (res.data.success) {\n        if (res.data.registerStatus == \"yes\" && res.data.privileg == \"admin\") {\n          setCookie(\"x-access-token\", res.data.adminToken);\n          Router.push(\"/admin\");\n        } else if (\n          res.data.registerStatus == \"yes\" &&\n          res.data.privileg == \"user\"\n        ) {\n          setCookie(\"x-access-token\", res.data.userToken);\n          Router.push(\"/profile\");\n        } else {\n          setCookie(\"x-access-token\", res.data.registerToken);\n          Router.push(\"/terms\");\n        }\n      }\n    } catch (error) {\n      this.setState({\n        errorMessage: error.response.data.message\n      });\n    }\n\n    this.setState({ loading: false });\n  }\n\n  render() {\n    return (\n      <div>\n        <HomeHeader />\n        <Layout>\n          <Header as=\"h1\" textAlign=\"center\" style={{ marginTop: 60 }}>\n            Welcome\n          </Header>\n          <Header as=\"h3\" textAlign=\"center\" style={{ marginBottom: 20 }}>\n            Please login or register\n          </Header>\n          <Form onSubmit={this.login} error={this.state.errorMessage}>\n            <Form.Field>\n              <label> Username </label>\n              <input\n                placeholder=\"Username\"\n                name=\"username\"\n                value={this.state.username}\n                onChange={event =>\n                  this.setState({ username: event.target.value })\n                }\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                value={this.state.password}\n                onChange={event =>\n                  this.setState({ password: event.target.value })\n                }\n              />\n            </Form.Field>\n            <Message error header=\"Oops!\" content={this.state.errorMessage} />\n            <Button loading={this.state.loading}>Login</Button>\n            <Link route=\"/register\">\n              <Button primary floated=\"right\">\n                Register\n              </Button>\n            </Link>\n          </Form>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n\n\n\n// WEBPACK FOOTER //\n// pages/login.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AAAA;AAAA;AACA;AATA;AASA;AACA;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;;;AAGA;AACA;;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AACA;AACA;AADA;AACA;;AAIA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AAJA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AALA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AA/FA;AACA;AAiGA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}